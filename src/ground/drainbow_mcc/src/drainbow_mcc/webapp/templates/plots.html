{% extends "basic.html" %}

{% block styles %}
{{ super() }}

{% assets "openlayers_css" %}
<link rel="stylesheet" href="{{ ASSET_URL }}"/>
{% endassets %}

{% endblock %}

{% block content %}
    <div class="row h-100 center-block">
        <div class="col-xl-12 text-center">
            <h1>PLOTS</h1>
        </div>
    </div>

    <div class="row h-100 center-block">
        <div class="col-xl-6 text-center">
            <canvas id="acc-plot-canvas"></canvas>
        </div>
        <div class="col-xl-6 text-center">
            <canvas id="gyro-plot-canvas"></canvas>
        </div>
    </div>

    <div class="row h-100 center-block">
        <div class="col-xl-6 text-center">
            <canvas id="temperature-plot-canvas"></canvas>
        </div>
        <div class="col-xl-6 text-center">
            <canvas id="pressure-plot-canvas"></canvas>
        </div>
    </div>

    <div class="row h-100 center-block" id="map">
    </div>
    <div style="display: none;">
        <div id="popup" title="Telemetry"></div>
    </div>

{% endblock %}




{% block js %}

{% assets "popper_js" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

{{ super() }}

{% assets "chart_js" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

{% assets "mcc_charts" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

{% assets "openlayers_js" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

{% assets "mcc_map" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

<script type="text/javascript">


$(document).ready(function(){
    var charts = [{
        name: "acc",
        datasets:
        [
            {
                "label": "Ускорения по X (g/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#f44242",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
            {
                "label": "Ускорения по Y (g/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#15ff00",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
            {
                "label": "Ускорения по Z (g/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#001dff",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
        ]
    },{
        name: "gyro",
        datasets:
        [
            {
                "label": "Угловая скорость по X (deg/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#f44242",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
            {
                "label": "Угловая скорость по Y (deg/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#15ff00",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
            {
                "label": "Угловая скорость по Z (deg/s)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#001dff",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },

        ]
    },{
        name: "temperature",
        datasets:
        [
            {
                "label": "Температура по датчику BMP280 (degC)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#f44242",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
        ]
    },{
        name: "pressure",
        datasets:
        [
            {
                "label": "Давление по датчику BMP280 (hPa)",
                "fill": false,
                "pointRadius": 0,
                "borderColor": "#15ff00",
                "borderWidth": 2,
                "lineTension": 0,
                "data": [],
            },
        ]
    }];

    updatePeriodMs = {{ config["PLOT_DATA_UPDATE_PERIOD_MS"] }}
    plotDataUrl = "{{ url_for(".plot_data") }}"
    mapDataUrl = "{{ url_for(".map_data") }}"

    mccChartsMain(charts, updatePeriodMs, plotDataUrl );

    mccMapMain(mapDataUrl);
})

</script>
{% endblock %}
